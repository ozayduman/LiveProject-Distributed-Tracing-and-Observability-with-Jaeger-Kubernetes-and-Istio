# This repository contains source code deliverables of my technical review for the Manning Distributed Tracing and Observability with Jaeger, Kubernetes, and Istio LiveProject.

### INSTALL ISTIO & CONFIGURE FOR JAEGER
"C:\Program Files\Kubernetes\istio-1.10.3\bin\istioctl" install -y -f ./istio.yaml
kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.10/samples/addons/jaeger.yaml
kubectl label namespace default istio-injection=enabled --overwrite=true
([for more about sidecar-injection](https://istio.io/latest/docs/setup/additional-setup/sidecar-injection/))



Expose eShop microservice and the Jaeger UI to the outside of the Kubernetes.

Create an Istio Gateway as the ingress for the eShop application and the Jaeger UI.
If you’re using a public cloud such as Google Cloud or AWS, the cloud provider will provide a public IP for the Istio gateway which can be accessed from your laptop. Otherwise, you can use kubectl port-forward command to forward the gateway port to the localhost.
Generate the spans and observe them on the Jaeger UI.

Use command curl 127.0.0.1:8080/checkout to trigger the demo application and generate traces and spans.
Open 127.0.0.1:8080 in the browser to observe the generated traces. We can see that there’re some traces generated by the Envoy sidecars. However, these traces just have two spans, for example, from eShop to billing service, or from eShop to delivery service. That’s because although Istio proxies can automatically generate spans, they need some hints to tie together the entire trace. Applications need to propagate the appropriate HTTP headers so that when the proxies send span information, the spans can be correlated correctly into a single trace. We’ll propagate these headers and connect the spans together as a single trace in the next milestone.

### HOW TO RUN 
Build docker images of each microservices as indicated in their own README.md files. Then, deploy kubernetes objects following the instuctions below:

### DEPLOY KUBERNETES & ISTIO OBJECTS
```
kubectl apply -f ./eshop.yaml
kubectl apply -f ./vs-gateway.yaml
kubectl port-forward service/istio-ingressgateway 8080:80 -n istio-system 
```

### OPEN JAEGER UI & CALL CHECKOUT URL OF ESHOP 
* Jaeger UI url: http://127.0.0.1:8080
* Checkout with curl: curl 127.0.0.1:8080/checkout
* response of curl command : eshop -> ozay's Order Created -> ozay's Order Payed -> ozay's Delivery Arranged -> ozay's Delivery transported
